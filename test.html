<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test G&D Codex</title>
    <style>
        body {
            background: #0a0e27;
            color: #e8edf5;
            font-family: Arial, sans-serif;
            padding: 20px;
        }
        .test-result {
            padding: 10px;
            margin: 10px 0;
            border: 1px solid #4a9eff;
            border-radius: 5px;
        }
        .success { background: #1a3a1a; }
        .error { background: #3a1a1a; }
    </style>
</head>
<body>
    <h1>Test de diagnostic G&D Codex</h1>
    <div id="results"></div>

    <script>
        const results = document.getElementById('results');
        
        function addResult(message, isSuccess) {
            const div = document.createElement('div');
            div.className = 'test-result ' + (isSuccess ? 'success' : 'error');
            div.textContent = message;
            results.appendChild(div);
        }

        // Test 1: Chargement des données
        fetch('src/data/categories.json')
            .then(response => {
                if (response.ok) {
                    addResult('✓ Fichier categories.json chargé', true);
                    return response.json();
                } else {
                    throw new Error('Erreur HTTP: ' + response.status);
                }
            })
            .then(data => {
                addResult('✓ JSON parsé: ' + data.length + ' catégories trouvées', true);
                console.log('Categories:', data);
            })
            .catch(error => {
                addResult('✗ Erreur chargement categories.json: ' + error.message, false);
            });

        // Test 2: Chargement du contenu
        fetch('src/content/systeme/index.md')
            .then(response => {
                if (response.ok) {
                    addResult('✓ Fichier systeme/index.md chargé', true);
                    return response.text();
                } else {
                    throw new Error('Erreur HTTP: ' + response.status);
                }
            })
            .then(text => {
                addResult('✓ Contenu MD: ' + text.substring(0, 50) + '...', true);
            })
            .catch(error => {
                addResult('✗ Erreur chargement markdown: ' + error.message, false);
            });

        // Test 3: Test module ES6
        const testModule = () => {
            addResult('✓ Modules ES6 supportés', true);
        };
        testModule();

        // Test 4: Vérifier marked.js
        const script = document.createElement('script');
        script.src = 'https://cdn.jsdelivr.net/npm/marked/marked.min.js';
        script.onload = () => {
            addResult('✓ Bibliothèque marked.js chargée', true);
        };
        script.onerror = () => {
            addResult('✗ Erreur chargement marked.js', false);
        };
        document.head.appendChild(script);

        addResult('✓ Page de test chargée', true);
    </script>
</body>
</html>
